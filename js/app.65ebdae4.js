(function(){"use strict";var t={922:function(t,e,r){var n=r(751),o=r(641);const i={id:"app"},l=(0,o.Lk)("h1",null,"Sudoku Game",-1);function u(t,e,r,n,u,s){const a=(0,o.g2)("SudokuGrid");return(0,o.uX)(),(0,o.CE)("div",i,[l,(0,o.bF)(a)])}var s=r(33);const a={class:"status-bar"},d={class:"sudoku-grid"},f=["onUpdate:modelValue","readonly","onCompositionend","onInput"],c={key:0,class:"next-level"},p=(0,o.Lk)("div",{class:"congrats-message"},"恭喜通關!",-1);function v(t,e,r,i,l,u){return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",a," 通關次數: "+(0,s.v_)(i.passCount),1),(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(i.grid,((t,r)=>((0,o.uX)(),(0,o.CE)("div",{key:r,class:"sudoku-row"},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t,((t,l)=>(0,o.bo)(((0,o.uX)(),(0,o.CE)("input",{key:l,type:"text",inputmode:"numeric",pattern:"[1-9]*",class:(0,s.C4)(["sudoku-cell",{"initial-cell":""!==i.initialGrid[r][l],"user-input":i.userInputs[r][l]}]),"onUpdate:modelValue":t=>i.grid[r][l]=t,readonly:i.isReadOnly(r,l),onCompositionstart:e[0]||(e[0]=t=>i.handleCompositionStart()),onCompositionend:t=>i.handleCompositionEnd(r,l,t),onInput:t=>i.handleInput(r,l,t)},null,42,f)),[[n.Jo,i.grid[r][l]]]))),128))])))),128))]),i.isLevelCompleted?((0,o.uX)(),(0,o.CE)("div",c,[p,(0,o.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>i.nextLevel&&i.nextLevel(...t))},"下一關")])):(0,o.Q3)("",!0)])}var m=r(953),h=r(278),g={setup(){const t=(0,h.Pj)(),e=(0,o.EW)((()=>t.getters.grid)),r=(0,o.EW)((()=>t.getters.initialGrid)),n=(0,o.EW)((()=>t.getters.solutionGrid)),i=(0,o.EW)((()=>t.getters.userInputs)),l=(0,o.EW)((()=>t.getters.passCount)),u=(0,m.KR)(!1),s=(0,m.KR)(!1),a=(t,e)=>""!==r.value[t][e],d=(e,r,n)=>{if(s.value)return void(u.value=!1);const o=n.target.value;/^[1-9]?$/.test(o)?(t.dispatch("setCell",{row:e,col:r,value:o}),p()):t.dispatch("setCell",{row:e,col:r,value:""})},f=()=>{u.value=!1,s.value=!0},c=(t,e,r)=>{u.value=!1,s.value=!1,d(t,e,r)},p=()=>{for(let t=0;t<9;t++)for(let r=0;r<9;r++)if(""===e.value[t][r]||e.value[t][r]!==n.value[t][r])return void(u.value=!1);u.value=!0},v=()=>{t.dispatch("setNextLevel"),u.value=!1};return(0,o.wB)(e,p,{deep:!0}),{grid:e,initialGrid:r,userInputs:i,passCount:l,handleInput:d,handleCompositionStart:f,handleCompositionEnd:c,isReadOnly:a,isLevelCompleted:u,nextLevel:v,isComposing:s}}},C=r(262);const y=(0,C.A)(g,[["render",v]]);var k=y,b={name:"App",components:{SudokuGrid:k}};const O=(0,C.A)(b,[["render",u]]);var E=O;const G=(t,e,r,n)=>{for(let o=0;o<9;o++)if(t[e][o]===n||t[o][r]===n||t[3*Math.floor(e/3)+Math.floor(o/3)][3*Math.floor(r/3)+o%3]===n)return!1;return!0},w=t=>{for(let e=0;e<9;e++)for(let r=0;r<9;r++)if(""===t[e][r]){const n=[1,2,3,4,5,6,7,8,9].sort((()=>Math.random()-.5));for(let o of n)if(G(t,e,r,o)){if(t[e][r]=o,w(t))return!0;t[e][r]=""}return!1}return!0},I=(t,e)=>{while(e>0){const r=Math.floor(9*Math.random()),n=Math.floor(9*Math.random());""!==t[r][n]&&(t[r][n]="",e--)}},L=t=>{const e=Array(9).fill().map((()=>Array(9).fill("")));w(e);const r=Math.floor((t>60?60:t)/10),n=9*(0==r?1:r);return I(e,n),e},x=t=>{const e=t=>{for(let e=0;e<9;e++)for(let r=0;r<9;r++)if(""===t[e][r])return[e,r];return null},r=(t,e,r)=>{const[n,o]=r;for(let u=0;u<9;u++)if(t[n][u]==e&&o!==u)return!1;for(let u=0;u<9;u++)if(t[u][o]==e&&n!==u)return!1;const i=3*Math.floor(n/3),l=3*Math.floor(o/3);for(let u=0;u<3;u++)for(let r=0;r<3;r++)if(t[i+u][l+r]==e&&i+u!==n&&l+r!==o)return!1;return!0},n=()=>{const o=e(t);if(!o)return!0;for(let e=1;e<10;e++){const i=e.toString(),l=r(t,i,o);if(l){const[e,r]=o;if(t[e][r]=i,n())return!0;t[e][r]=""}}return!1},o=JSON.parse(JSON.stringify(t));return n(o),o},M=t=>L(t),S=t=>JSON.parse(JSON.stringify(t)),A=M(1),N=x(S(A));var j=(0,h.y$)({state:{level:1,passCount:0,grid:S(A),initialGrid:S(A),solutionGrid:S(N),userInputs:Array(9).fill().map((()=>Array(9).fill(!1)))},mutations:{setNextLevel(t){t.passCount+=1,t.level=t.passCount+1;const e=M(t.level);t.grid=S(e),t.initialGrid=S(e),t.solutionGrid=S(x(S(e))),t.userInputs=Array(9).fill().map((()=>Array(9).fill(!1)))},updateCell(t,{row:e,col:r,value:n}){t.grid[e][r]=n,t.userInputs[e][r]=""!==n}},actions:{setNextLevel({commit:t}){t("setNextLevel")},setCell({commit:t},e){t("updateCell",e)}},getters:{level:t=>t.level,passCount:t=>t.passCount,grid:t=>t.grid,initialGrid:t=>t.initialGrid,solutionGrid:t=>t.solutionGrid,userInputs:t=>t.userInputs}});const X=(0,n.Ef)(E);X.use(j),X.mount("#app")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.m=t,function(){var t=[];r.O=function(e,n,o,i){if(!n){var l=1/0;for(d=0;d<t.length;d++){n=t[d][0],o=t[d][1],i=t[d][2];for(var u=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((function(t){return r.O[t](n[s])}))?n.splice(s--,1):(u=!1,i<l&&(l=i));if(u){t.splice(d--,1);var a=o();void 0!==a&&(e=a)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[n,o,i]}}(),function(){r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};r.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,i,l=n[0],u=n[1],s=n[2],a=0;if(l.some((function(e){return 0!==t[e]}))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(s)var d=s(r)}for(e&&e(n);a<l.length;a++)i=l[a],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(d)},n=self["webpackChunkmy_sudoku_game"]=self["webpackChunkmy_sudoku_game"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=r.O(void 0,[504],(function(){return r(922)}));n=r.O(n)})();
//# sourceMappingURL=app.65ebdae4.js.map