(function(){"use strict";var t={742:function(t,i,e){var n=e(751),r=e(641);const o={id:"app"},l=(0,r.Lk)("h1",null,"數獨",-1);function u(t,i,e,n,u,s){const a=(0,r.g2)("SudokuGrid");return(0,r.uX)(),(0,r.CE)("div",o,[l,(0,r.bF)(a)])}var s=e(33);const a={class:"status-bar"},d={class:"sudoku-grid-container"},c={class:"sudoku-grid"},p=["onUpdate:modelValue","readonly","onCompositionend","onInput"],f={key:0,class:"next-level"},v=(0,r.Lk)("div",{class:"congrats-message"},"恭喜通關!",-1);function g(t,i,e,o,l,u){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",a," 通關次數: "+(0,s.v_)(o.passCount),1),(0,r.Lk)("div",d,[(0,r.Lk)("div",c,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.grid,((t,e)=>((0,r.uX)(),(0,r.CE)("div",{key:e,class:"sudoku-row"},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t,((t,l)=>(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:l,type:"text",inputmode:"numeric",pattern:"[1-9]*",class:(0,s.C4)(["sudoku-cell",{"initial-cell":""!==o.initialGrid[e][l],"user-input":o.userInputs[e][l]}]),"onUpdate:modelValue":t=>o.grid[e][l]=t,readonly:o.isReadOnly(e,l),onCompositionstart:i[0]||(i[0]=t=>o.isComposing=!0),onCompositionend:t=>o.handleCompositionEnd(e,l,t),onInput:t=>o.handleInput(e,l,t)},null,42,p)),[[n.Jo,o.grid[e][l]]]))),128))])))),128))])]),o.isLevelCompleted?((0,r.uX)(),(0,r.CE)("div",f,[v,(0,r.Lk)("button",{ref:"nextLevelButton",onClick:i[1]||(i[1]=(...t)=>o.nextLevel&&o.nextLevel(...t))},"下一關",512)])):(0,r.Q3)("",!0)])}var m=e(953),h=e(278),C={setup(){const t=(0,h.Pj)(),i=(0,r.EW)((()=>t.getters.grid)),e=(0,r.EW)((()=>t.getters.initialGrid)),n=(0,r.EW)((()=>t.getters.solutionGrid)),o=(0,r.EW)((()=>t.getters.userInputs)),l=(0,r.EW)((()=>t.getters.passCount)),u=(0,m.KR)(!1),s=(0,m.KR)(!1),a=(0,m.KR)(null),d=(t,i)=>""!==e.value[t][i],c=(i,e,n)=>{if(s.value)return void(u.value=!1);const r=n.target.value;/^[1-9]?$/.test(r)?(t.dispatch("setCell",{row:i,col:e,value:r}),v()):t.dispatch("setCell",{row:i,col:e,value:""})},p=()=>{u.value=!1,s.value=!0},f=(t,i,e)=>{u.value=!1,s.value=!1,c(t,i,e)},v=()=>{console.log("checkLevelCompletion");for(let t=0;t<9;t++)for(let e=0;e<9;e++){const r=i.value[t][e],o=n.value[t][e];if(""===r||String(r)!==String(o))return void(u.value=!1)}u.value=!0,(0,r.dY)((()=>{a.value&&a.value.focus()}))},g=()=>{t.dispatch("setNextLevel"),u.value=!1};return(0,r.wB)(i,v,{deep:!0}),{grid:i,initialGrid:e,solutionGrid:n,userInputs:o,passCount:l,handleInput:c,handleCompositionStart:p,handleCompositionEnd:f,isReadOnly:d,isLevelCompleted:u,nextLevel:g,isComposing:s,nextLevelButton:a}}},G=e(262);const y=(0,G.A)(C,[["render",g]]);var k=y,L={name:"App",components:{SudokuGrid:k}};const b=(0,G.A)(L,[["render",u]]);var E=b;const w=(t,i,e,n)=>{for(let r=0;r<9;r++)if(t[i][r]===n||t[r][e]===n||t[3*Math.floor(i/3)+Math.floor(r/3)][3*Math.floor(e/3)+r%3]===n)return!1;return!0},x=t=>{for(let i=0;i<9;i++)for(let e=0;e<9;e++)if(""===t[i][e]){const n=[1,2,3,4,5,6,7,8,9].sort((()=>Math.random()-.5));for(let r of n)if(w(t,i,e,r)){if(t[i][e]=r,x(t))return!0;t[i][e]=""}return!1}return!0},O=(t,i)=>{while(i>0){const e=Math.floor(9*Math.random()),n=Math.floor(9*Math.random());""!==t[e][n]&&(t[e][n]="",i--)}},I=t=>{const i=Array(9).fill().map((()=>Array(9).fill(""))),e=Array(9).fill().map((()=>Array(9).fill("")));x(i);for(let l=0;l<9;l++)for(let t=0;t<9;t++)e[l][t]=i[l][t];const n=1+Math.floor((t>10?10:t)/2),r=9*n;O(i,r);const o=A(i);return{grid:i,initialGrid:o,solutionGrid:e}},A=t=>JSON.parse(JSON.stringify(t)),M=t=>{const{grid:i,initialGrid:e,solutionGrid:n}=I(t);return{grid:i,initialGrid:e,solutionGrid:n}},j=M(1);var N=(0,h.y$)({state:{level:1,grid:j.grid,initialGrid:j.initialGrid,solutionGrid:j.solutionGrid,userInputs:Array(9).fill().map((()=>Array(9).fill(!1))),passCount:0},mutations:{setGrid(t,{grid:i,initialGrid:e,solutionGrid:n}){t.grid=i,t.initialGrid=e,t.solutionGrid=n},setCell(t,{row:i,col:e,value:n}){t.grid[i][e]=n,t.userInputs[i][e]=!0},setNextLevel(t){t.passCount++,t.level=t.passCount+1;const{grid:i,initialGrid:e,solutionGrid:n}=I(t.level);t.grid=i,t.initialGrid=e,t.solutionGrid=n,t.userInputs=Array(9).fill().map((()=>Array(9).fill(!1)))}},actions:{generateNewPuzzle({commit:t},i){const{grid:e,initialGrid:n,solutionGrid:r}=I(i);t("setGrid",{grid:e,initialGrid:n,solutionGrid:r})},setCell({commit:t},i){t("setCell",i)},setNextLevel({commit:t}){t("setNextLevel")}},getters:{grid:t=>t.grid,initialGrid:t=>t.initialGrid,solutionGrid:t=>t.solutionGrid,userInputs:t=>t.userInputs,passCount:t=>t.passCount}});const S=(0,n.Ef)(E);S.use(N),S.mount("#app")}},i={};function e(n){var r=i[n];if(void 0!==r)return r.exports;var o=i[n]={exports:{}};return t[n](o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(i,n,r,o){if(!n){var l=1/0;for(d=0;d<t.length;d++){n=t[d][0],r=t[d][1],o=t[d][2];for(var u=!0,s=0;s<n.length;s++)(!1&o||l>=o)&&Object.keys(e.O).every((function(t){return e.O[t](n[s])}))?n.splice(s--,1):(u=!1,o<l&&(l=o));if(u){t.splice(d--,1);var a=r();void 0!==a&&(i=a)}}return i}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[n,r,o]}}(),function(){e.d=function(t,i){for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={524:0};e.O.j=function(i){return 0===t[i]};var i=function(i,n){var r,o,l=n[0],u=n[1],s=n[2],a=0;if(l.some((function(i){return 0!==t[i]}))){for(r in u)e.o(u,r)&&(e.m[r]=u[r]);if(s)var d=s(e)}for(i&&i(n);a<l.length;a++)o=l[a],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},n=self["webpackChunkmy_sudoku_game"]=self["webpackChunkmy_sudoku_game"]||[];n.forEach(i.bind(null,0)),n.push=i.bind(null,n.push.bind(n))}();var n=e.O(void 0,[504],(function(){return e(742)}));n=e.O(n)})();
//# sourceMappingURL=app.a239c7c4.js.map