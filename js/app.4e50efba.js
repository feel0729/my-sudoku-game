(function(){"use strict";var t={46:function(t,i,e){var r=e(751),n=e(641);const o={id:"app"},l=(0,n.Lk)("h1",null,"數獨",-1);function s(t,i,e,r,s,u){const a=(0,n.g2)("SudokuGrid");return(0,n.uX)(),(0,n.CE)("div",o,[l,(0,n.bF)(a)])}var u=e(33);const a={class:"status-bar"},d={class:"sudoku-grid-container"},c={class:"sudoku-grid"},p=["onUpdate:modelValue","readonly","onCompositionend","onInput"],f={key:0,class:"next-level"},v=(0,n.Lk)("div",{class:"congrats-message"},"恭喜通關!",-1);function g(t,i,e,o,l,s){return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",a," 通關次數: "+(0,u.v_)(o.passCount),1),(0,n.Lk)("div",d,[(0,n.Lk)("div",c,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.grid,((t,e)=>((0,n.uX)(),(0,n.CE)("div",{key:e,class:"sudoku-row"},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t,((t,l)=>(0,n.bo)(((0,n.uX)(),(0,n.CE)("input",{key:l,type:"text",inputmode:"numeric",pattern:"[1-9]*",class:(0,u.C4)(["sudoku-cell",{"initial-cell":""!==o.initialGrid[e][l],"user-input":o.userInputs[e][l]}]),"onUpdate:modelValue":t=>o.grid[e][l]=t,readonly:o.isReadOnly(e,l),onCompositionstart:i[0]||(i[0]=t=>o.isComposing=!0),onCompositionend:t=>o.handleCompositionEnd(e,l,t),onInput:t=>o.handleInput(e,l,t)},null,42,p)),[[r.Jo,o.grid[e][l]]]))),128))])))),128))])]),o.isLevelCompleted?((0,n.uX)(),(0,n.CE)("div",f,[v,(0,n.Lk)("button",{onClick:i[1]||(i[1]=(...t)=>o.nextLevel&&o.nextLevel(...t))},"下一關")])):(0,n.Q3)("",!0)])}var m=e(953),h=e(278),G={setup(){const t=(0,h.Pj)(),i=(0,n.EW)((()=>t.getters.grid)),e=(0,n.EW)((()=>t.getters.initialGrid)),r=(0,n.EW)((()=>t.getters.solutionGrid)),o=(0,n.EW)((()=>t.getters.userInputs)),l=(0,n.EW)((()=>t.getters.passCount)),s=(0,m.KR)(!1),u=(0,m.KR)(!1),a=(t,i)=>""!==e.value[t][i],d=(i,e,r)=>{if(u.value)return void(s.value=!1);const n=r.target.value;/^[1-9]?$/.test(n)?(t.dispatch("setCell",{row:i,col:e,value:n}),f()):t.dispatch("setCell",{row:i,col:e,value:""})},c=()=>{s.value=!1,u.value=!0},p=(t,i,e)=>{s.value=!1,u.value=!1,d(t,i,e)},f=()=>{console.log("checkLevelCompletion");for(let t=0;t<9;t++)for(let e=0;e<9;e++){const n=i.value[t][e],o=r.value[t][e];if(""===n||String(n)!==String(o))return s.value=!1,console.log(`error grid.value[${t}][${e}]:${n}`),void console.log(`should be solutionGrid.value[${t}][${e}]:${o}`)}s.value=!0},v=()=>{t.dispatch("setNextLevel"),s.value=!1};return(0,n.wB)(i,f,{deep:!0}),{grid:i,initialGrid:e,solutionGrid:r,userInputs:o,passCount:l,handleInput:d,handleCompositionStart:c,handleCompositionEnd:p,isReadOnly:a,isLevelCompleted:s,nextLevel:v,isComposing:u}}},C=e(262);const y=(0,C.A)(G,[["render",g]]);var k=y,b={name:"App",components:{SudokuGrid:k}};const E=(0,C.A)(b,[["render",s]]);var L=E;const w=(t,i,e,r)=>{for(let n=0;n<9;n++)if(t[i][n]===r||t[n][e]===r||t[3*Math.floor(i/3)+Math.floor(n/3)][3*Math.floor(e/3)+n%3]===r)return!1;return!0},O=t=>{for(let i=0;i<9;i++)for(let e=0;e<9;e++)if(""===t[i][e]){const r=[1,2,3,4,5,6,7,8,9].sort((()=>Math.random()-.5));for(let n of r)if(w(t,i,e,n)){if(t[i][e]=n,O(t))return!0;t[i][e]=""}return!1}return!0},I=(t,i)=>{while(i>0){const e=Math.floor(9*Math.random()),r=Math.floor(9*Math.random());""!==t[e][r]&&(t[e][r]="",i--)}},x=t=>{const i=Array(9).fill().map((()=>Array(9).fill(""))),e=Array(9).fill().map((()=>Array(9).fill("")));O(i);for(let l=0;l<9;l++)for(let t=0;t<9;t++)e[l][t]=i[l][t];const r=1+Math.floor((t>10?10:t)/2),n=9*r;I(i,n);const o=A(i);return{grid:i,initialGrid:o,solutionGrid:e}},A=t=>JSON.parse(JSON.stringify(t)),M=t=>{const{grid:i,initialGrid:e,solutionGrid:r}=x(t);return{grid:i,initialGrid:e,solutionGrid:r}},$=M(1);var j=(0,h.y$)({state:{level:1,grid:$.grid,initialGrid:$.initialGrid,solutionGrid:$.solutionGrid,userInputs:Array(9).fill().map((()=>Array(9).fill(!1))),passCount:0},mutations:{setGrid(t,{grid:i,initialGrid:e,solutionGrid:r}){t.grid=i,t.initialGrid=e,t.solutionGrid=r},setCell(t,{row:i,col:e,value:r}){t.grid[i][e]=r,t.userInputs[i][e]=!0},setNextLevel(t){t.passCount++,t.level=t.passCount+1;const{grid:i,initialGrid:e,solutionGrid:r}=x(t.level);t.grid=i,t.initialGrid=e,t.solutionGrid=r,t.userInputs=Array(9).fill().map((()=>Array(9).fill(!1)))}},actions:{generateNewPuzzle({commit:t},i){const{grid:e,initialGrid:r,solutionGrid:n}=x(i);t("setGrid",{grid:e,initialGrid:r,solutionGrid:n})},setCell({commit:t},i){t("setCell",i)},setNextLevel({commit:t}){t("setNextLevel")}},getters:{grid:t=>t.grid,initialGrid:t=>t.initialGrid,solutionGrid:t=>t.solutionGrid,userInputs:t=>t.userInputs,passCount:t=>t.passCount}});const N=(0,r.Ef)(L);N.use(j),N.mount("#app")}},i={};function e(r){var n=i[r];if(void 0!==n)return n.exports;var o=i[r]={exports:{}};return t[r](o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(i,r,n,o){if(!r){var l=1/0;for(d=0;d<t.length;d++){r=t[d][0],n=t[d][1],o=t[d][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||l>=o)&&Object.keys(e.O).every((function(t){return e.O[t](r[u])}))?r.splice(u--,1):(s=!1,o<l&&(l=o));if(s){t.splice(d--,1);var a=n();void 0!==a&&(i=a)}}return i}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,n,o]}}(),function(){e.d=function(t,i){for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={524:0};e.O.j=function(i){return 0===t[i]};var i=function(i,r){var n,o,l=r[0],s=r[1],u=r[2],a=0;if(l.some((function(i){return 0!==t[i]}))){for(n in s)e.o(s,n)&&(e.m[n]=s[n]);if(u)var d=u(e)}for(i&&i(r);a<l.length;a++)o=l[a],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(d)},r=self["webpackChunkmy_sudoku_game"]=self["webpackChunkmy_sudoku_game"]||[];r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r))}();var r=e.O(void 0,[504],(function(){return e(46)}));r=e.O(r)})();
//# sourceMappingURL=app.4e50efba.js.map