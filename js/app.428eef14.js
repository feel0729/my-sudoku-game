(function(){"use strict";var t={599:function(t,i,n){var r=n(751),e=n(641);const o={id:"app"},l=(0,e.Lk)("h1",null,"數獨",-1);function s(t,i,n,r,s,u){const a=(0,e.g2)("SudokuGrid");return(0,e.uX)(),(0,e.CE)("div",o,[l,(0,e.bF)(a)])}var u=n(33);const a={class:"status-bar"},d={class:"sudoku-grid-container"},c={class:"sudoku-grid"},p=["onUpdate:modelValue","readonly","onCompositionend","onInput"],f={key:0,class:"next-level"},v=(0,e.Lk)("div",{class:"congrats-message"},"恭喜通關!",-1);function g(t,i,n,o,l,s){return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.Lk)("div",a," 通關次數: "+(0,u.v_)(o.passCount),1),(0,e.Lk)("div",d,[(0,e.Lk)("div",c,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(o.grid,((t,n)=>((0,e.uX)(),(0,e.CE)("div",{key:n,class:"sudoku-row"},[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(t,((t,l)=>(0,e.bo)(((0,e.uX)(),(0,e.CE)("input",{key:l,type:"text",inputmode:"numeric",pattern:"[1-9]*",class:(0,u.C4)(["sudoku-cell",{"initial-cell":""!==o.initialGrid[n][l],"user-input":o.userInputs[n][l]}]),"onUpdate:modelValue":t=>o.grid[n][l]=t,readonly:o.isReadOnly(n,l),onCompositionstart:i[0]||(i[0]=t=>o.isComposing=!0),onCompositionend:t=>o.handleCompositionEnd(n,l,t),onInput:t=>o.handleInput(n,l,t)},null,42,p)),[[r.Jo,o.grid[n][l]]]))),128))])))),128))])]),o.isLevelCompleted?((0,e.uX)(),(0,e.CE)("div",f,[v,(0,e.Lk)("button",{onClick:i[1]||(i[1]=(...t)=>o.nextLevel&&o.nextLevel(...t))},"下一關")])):(0,e.Q3)("",!0)])}var m=n(953),h=n(278),C={setup(){const t=(0,h.Pj)(),i=(0,e.EW)((()=>t.getters.grid)),n=(0,e.EW)((()=>t.getters.initialGrid)),r=(0,e.EW)((()=>t.getters.solutionGrid)),o=(0,e.EW)((()=>t.getters.userInputs)),l=(0,e.EW)((()=>t.getters.passCount)),s=(0,m.KR)(!1),u=(0,m.KR)(!1),a=(t,i)=>""!==n.value[t][i],d=(i,n,r)=>{if(u.value)return void(s.value=!1);const e=r.target.value;/^[1-9]?$/.test(e)?(t.dispatch("setCell",{row:i,col:n,value:e}),f()):t.dispatch("setCell",{row:i,col:n,value:""})},c=()=>{s.value=!1,u.value=!0},p=(t,i,n)=>{s.value=!1,u.value=!1,d(t,i,n)},f=()=>{console.log("checkLevelCompletion");for(let t=0;t<9;t++)for(let n=0;n<9;n++){const e=i.value[t][n],o=r.value[t][n];if(""===e||String(e)!==String(o))return void(s.value=!1)}s.value=!0},v=()=>{t.dispatch("setNextLevel"),s.value=!1};return(0,e.wB)(i,f,{deep:!0}),{grid:i,initialGrid:n,solutionGrid:r,userInputs:o,passCount:l,handleInput:d,handleCompositionStart:c,handleCompositionEnd:p,isReadOnly:a,isLevelCompleted:s,nextLevel:v,isComposing:u}}},G=n(262);const y=(0,G.A)(C,[["render",g]]);var k=y,b={name:"App",components:{SudokuGrid:k}};const E=(0,G.A)(b,[["render",s]]);var L=E;const w=(t,i,n,r)=>{for(let e=0;e<9;e++)if(t[i][e]===r||t[e][n]===r||t[3*Math.floor(i/3)+Math.floor(e/3)][3*Math.floor(n/3)+e%3]===r)return!1;return!0},O=t=>{for(let i=0;i<9;i++)for(let n=0;n<9;n++)if(""===t[i][n]){const r=[1,2,3,4,5,6,7,8,9].sort((()=>Math.random()-.5));for(let e of r)if(w(t,i,n,e)){if(t[i][n]=e,O(t))return!0;t[i][n]=""}return!1}return!0},I=(t,i)=>{while(i>0){const n=Math.floor(9*Math.random()),r=Math.floor(9*Math.random());""!==t[n][r]&&(t[n][r]="",i--)}},x=t=>{const i=Array(9).fill().map((()=>Array(9).fill(""))),n=Array(9).fill().map((()=>Array(9).fill("")));O(i);for(let l=0;l<9;l++)for(let t=0;t<9;t++)n[l][t]=i[l][t];const r=1+Math.floor((t>10?10:t)/2),e=9*r;I(i,e);const o=A(i);return{grid:i,initialGrid:o,solutionGrid:n}},A=t=>JSON.parse(JSON.stringify(t)),M=t=>{const{grid:i,initialGrid:n,solutionGrid:r}=x(t);return{grid:i,initialGrid:n,solutionGrid:r}},j=M(1);var N=(0,h.y$)({state:{level:1,grid:j.grid,initialGrid:j.initialGrid,solutionGrid:j.solutionGrid,userInputs:Array(9).fill().map((()=>Array(9).fill(!1))),passCount:0},mutations:{setGrid(t,{grid:i,initialGrid:n,solutionGrid:r}){t.grid=i,t.initialGrid=n,t.solutionGrid=r},setCell(t,{row:i,col:n,value:r}){t.grid[i][n]=r,t.userInputs[i][n]=!0},setNextLevel(t){t.passCount++,t.level=t.passCount+1;const{grid:i,initialGrid:n,solutionGrid:r}=x(t.level);t.grid=i,t.initialGrid=n,t.solutionGrid=r,t.userInputs=Array(9).fill().map((()=>Array(9).fill(!1)))}},actions:{generateNewPuzzle({commit:t},i){const{grid:n,initialGrid:r,solutionGrid:e}=x(i);t("setGrid",{grid:n,initialGrid:r,solutionGrid:e})},setCell({commit:t},i){t("setCell",i)},setNextLevel({commit:t}){t("setNextLevel")}},getters:{grid:t=>t.grid,initialGrid:t=>t.initialGrid,solutionGrid:t=>t.solutionGrid,userInputs:t=>t.userInputs,passCount:t=>t.passCount}});const S=(0,r.Ef)(L);S.use(N),S.mount("#app")}},i={};function n(r){var e=i[r];if(void 0!==e)return e.exports;var o=i[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.m=t,function(){var t=[];n.O=function(i,r,e,o){if(!r){var l=1/0;for(d=0;d<t.length;d++){r=t[d][0],e=t[d][1],o=t[d][2];for(var s=!0,u=0;u<r.length;u++)(!1&o||l>=o)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(s=!1,o<l&&(l=o));if(s){t.splice(d--,1);var a=e();void 0!==a&&(i=a)}}return i}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[r,e,o]}}(),function(){n.d=function(t,i){for(var r in i)n.o(i,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)}}(),function(){var t={524:0};n.O.j=function(i){return 0===t[i]};var i=function(i,r){var e,o,l=r[0],s=r[1],u=r[2],a=0;if(l.some((function(i){return 0!==t[i]}))){for(e in s)n.o(s,e)&&(n.m[e]=s[e]);if(u)var d=u(n)}for(i&&i(r);a<l.length;a++)o=l[a],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(d)},r=self["webpackChunkmy_sudoku_game"]=self["webpackChunkmy_sudoku_game"]||[];r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r))}();var r=n.O(void 0,[504],(function(){return n(599)}));r=n.O(r)})();
//# sourceMappingURL=app.428eef14.js.map